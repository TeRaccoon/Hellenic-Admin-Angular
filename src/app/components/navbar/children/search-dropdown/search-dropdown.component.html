<div class="search-container">
  <div class="search-bar">
    <input
      [(ngModel)]="searchInput"
      (input)="searchTables($event)"
      (focus)="searchDropdownVisible = true"
      type="text"
      placeholder="Search..."
    />
    <button (click)="searchDropdownVisible = true">
      @if (!searching) {
        <fa-icon [icon]="icons.search"></fa-icon>
      }
      @if (searching) {
        <fa-icon [icon]="icons.loading" spinPulse [spin]="true" />
      }
    </button>
  </div>
  <div
    class="search-dropdown-container"
    [class.visible]="searchDropdownVisible"
    [class.hidden]="!searchDropdownVisible"
  >
    @if (filteredTableOptions.length > 0 || searchResults.length > 0) {
      @for (table of filteredTableOptions; track table) {
        <div class="search-option" (click)="changeTable(table.actual)">
          <p>{{ table.display }}</p>
        </div>
      }
      @for (results of searchResults; track results) {
        <div class="search-option" (click)="goToRow(results.tableName, results.matchedValue)">
          <div class="results-container">
            <p class="bold">{{ results.tableName }}:</p>
            <p class="display-value">{{ results.displayValue }}</p>
          </div>
        </div>
      }
    } @else {
      @if (!searching) {
        <div class="search-option">
          <p>
            There were no results
            <fa-icon [icon]="icons.noResults" />
          </p>
        </div>
      }
    }
  </div>
</div>
